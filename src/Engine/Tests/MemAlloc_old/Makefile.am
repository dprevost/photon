# Copyright (C) 2006 Daniel Prevost <dprevost@users.sourceforge.net>
#  
# This file is free software; as a special exception the author gives
# unlimited permission to copy and/or distribute it, with or without 
# modifications, as long as this notice is preserved.
# 
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY, to the extent permitted by law; without even the
# implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

CLEANFILES = *~ core

check_PROGRAMS =                     \
                 bgetNULLAlloc       \
                 bgetNULLError       \
                 bgetPass            \
                 bgetZeroLen         \
                 bpoolNULLAlloc      \
                 bpoolNULLBuf        \
                 bpoolNULLError      \
                 bpoolPass           \
                 bpoolZeroLen        \
                 brelNULLAlloc       \
                 brelNULLError       \
                 brelNULLPtr         \
                 brelPass            \
                 CloseNULLAlloc      \
                 CloseNULLError      \
                 ClosePass           \
                 FreeBuffNULLAlloc   \
                 FreeBuffNULLArray   \
                 FreeBuffNULLError   \
                 FreeBuffPass        \
                 FreeBuffZeroLen     \
                 FreeNULLAlloc       \
                 FreeNULLError       \
                 FreeNULLPtr         \
                 FreePass            \
                 GetBuffNULLAlloc    \
                 GetBuffNULLArray    \
                 GetBuffNULLError    \
                 GetBuffPass         \
                 GetBuffZeroLen      \
                 InitNULLAddr        \
                 InitNULLAlloc       \
                 InitNULLBase        \
                 InitNULLError       \
                 InitPass            \
                 InitZeroLen         \
                 IsBuffNULLAlloc     \
                 IsBuffNULLBuf       \
                 IsBuffNULLError     \
                 IsBuffPass          \
                 Macros              \
                 MallocNULLAlloc     \
                 MallocNULLError     \
                 MallocPass          \
                 MallocZeroLen       \
                 ResetStatsNULLAlloc \
                 ResetStatsNULLError \
                 ResetStatsPass      \
                 SetBaseNULLAlloc    \
                 SetBaseNULLBase     \
                 SetBaseNULLError    \
                 SetBasePass         \
                 StatsNULLAlloc      \
                 StatsNULLCurrent    \
                 StatsNULLError      \
                 StatsNULLMax        \
                 StatsNULLNumFree    \
                 StatsNULLNumMalloc  \
                 StatsNULLTotal      \
                 StatsPass           \
                 ValidateNULLAlloc   \
                 ValidateNULLError   \
                 ValidatePass

#                 bget                

bget_SOURCES                = bget.cpp
bgetNULLAlloc_SOURCES       = bgetNULLAlloc.c
bgetNULLError_SOURCES       = bgetNULLError.c
bgetPass_SOURCES            = bgetPass.c
bgetZeroLen_SOURCES         = bgetZeroLen.c
bpoolNULLAlloc_SOURCES      = bpoolNULLAlloc.c
bpoolNULLBuf_SOURCES        = bpoolNULLBuf.c
bpoolNULLError_SOURCES      = bpoolNULLError.c
bpoolPass_SOURCES           = bpoolPass.c
bpoolZeroLen_SOURCES        = bpoolZeroLen.c
brelNULLAlloc_SOURCES       = brelNULLAlloc.c
brelNULLError_SOURCES       = brelNULLError.c
brelNULLPtr_SOURCES         = brelNULLPtr.c
brelPass_SOURCES            = brelPass.c
CloseNULLAlloc_SOURCES      = CloseNULLAlloc.c
CloseNULLError_SOURCES      = CloseNULLError.c
ClosePass_SOURCES           = ClosePass.c
FreeBuffNULLAlloc_SOURCES   = FreeBuffNULLAlloc.c
FreeBuffNULLArray_SOURCES   = FreeBuffNULLArray.c
FreeBuffNULLError_SOURCES   = FreeBuffNULLError.c
FreeBuffPass_SOURCES        = FreeBuffPass.c
FreeBuffZeroLen_SOURCES     = FreeBuffZeroLen.c
FreeNULLAlloc_SOURCES       = FreeNULLAlloc.c
FreeNULLError_SOURCES       = FreeNULLError.c
FreeNULLPtr_SOURCES         = FreeNULLPtr.c
FreePass_SOURCES            = FreePass.c
GetBuffNULLAlloc_SOURCES    = GetBuffNULLAlloc.c
GetBuffNULLArray_SOURCES    = GetBuffNULLArray.c
GetBuffNULLError_SOURCES    = GetBuffNULLError.c
GetBuffPass_SOURCES         = GetBuffPass.c
GetBuffZeroLen_SOURCES      = GetBuffZeroLen.c
InitNULLAddr_SOURCES        = InitNULLAddr.c
InitNULLAlloc_SOURCES       = InitNULLAlloc.c
InitNULLBase_SOURCES        = InitNULLBase.c
InitNULLError_SOURCES       = InitNULLError.c
InitPass_SOURCES            = InitPass.c
InitZeroLen_SOURCES         = InitZeroLen.c
IsBuffNULLAlloc_SOURCES     = IsBuffNULLAlloc.c
IsBuffNULLBuf_SOURCES       = IsBuffNULLBuf.c
IsBuffNULLError_SOURCES     = IsBuffNULLError.c
IsBuffPass_SOURCES          = IsBuffPass.c
Macros_SOURCES              = Macros.c
MallocNULLAlloc_SOURCES     = MallocNULLAlloc.c
MallocNULLError_SOURCES     = MallocNULLError.c
MallocPass_SOURCES          = MallocPass.c
MallocZeroLen_SOURCES       = MallocZeroLen.c
ResetStatsNULLAlloc_SOURCES = ResetStatsNULLAlloc.c
ResetStatsNULLError_SOURCES = ResetStatsNULLError.c
ResetStatsPass_SOURCES      = ResetStatsPass.c
SetBaseNULLAlloc_SOURCES    = SetBaseNULLAlloc.c
SetBaseNULLBase_SOURCES     = SetBaseNULLBase.c
SetBaseNULLError_SOURCES    = SetBaseNULLError.c
SetBasePass_SOURCES         = SetBasePass.c
StatsNULLAlloc_SOURCES      = StatsNULLAlloc.c
StatsNULLCurrent_SOURCES    = StatsNULLCurrent.c
StatsNULLError_SOURCES      = StatsNULLError.c
StatsNULLMax_SOURCES        = StatsNULLMax.c
StatsNULLNumFree_SOURCES    = StatsNULLNumFree.c
StatsNULLNumMalloc_SOURCES  = StatsNULLNumMalloc.c
StatsNULLTotal_SOURCES      = StatsNULLTotal.c
StatsPass_SOURCES           = StatsPass.c
ValidateNULLAlloc_SOURCES   = ValidateNULLAlloc.c
ValidateNULLError_SOURCES   = ValidateNULLError.c
ValidatePass_SOURCES        = ValidatePass.c

EXTRA_DIST =         \
             bget.sh

TESTS_ENVIRONMENT = srcdir=$(srcdir) top_builddir=$(top_builddir) verbose=1 PYTHON=$(PYTHON)

TESTS1 = Macros

TESTS =                     \
        bgetNULLAlloc       \
        bgetNULLError       \
        bgetZeroLen         \
        bgetPass            \
        bpoolNULLAlloc      \
        bpoolNULLBuf        \
        bpoolNULLError      \
        bpoolZeroLen        \
        bpoolPass           \
        brelNULLAlloc       \
        brelNULLError       \
        brelNULLPtr         \
        brelPass            \
        CloseNULLAlloc      \
        CloseNULLError      \
        ClosePass           \
        FreeBuffNULLAlloc   \
        FreeBuffNULLArray   \
        FreeBuffNULLError   \
        FreeBuffZeroLen     \
        FreeBuffPass        \
        FreeNULLAlloc       \
        FreeNULLError       \
        FreeNULLPtr         \
        FreePass            \
        GetBuffNULLAlloc    \
        GetBuffNULLArray    \
        GetBuffNULLError    \
        GetBuffZeroLen      \
        GetBuffPass         \
        InitNULLAddr        \
        InitNULLAlloc       \
        InitNULLBase        \
        InitNULLError       \
        InitPass            \
        InitZeroLen         \
        IsBuffNULLAlloc     \
        IsBuffNULLBuf       \
        IsBuffNULLError     \
        IsBuffPass          \
        Macros              \
        MallocNULLAlloc     \
        MallocNULLError     \
        MallocPass          \
        MallocZeroLen       \
        ResetStatsNULLAlloc \
        ResetStatsNULLError \
        ResetStatsPass      \
        SetBaseNULLAlloc    \
        SetBaseNULLBase     \
        SetBaseNULLError    \
        SetBasePass         \
        StatsNULLAlloc      \
        StatsNULLCurrent    \
        StatsNULLError      \
        StatsNULLMax        \
        StatsNULLNumFree    \
        StatsNULLNumMalloc  \
        StatsNULLTotal      \
        StatsPass           \
        ValidateNULLAlloc   \
        ValidateNULLError   \
        ValidatePass        

#        bget.sh            

XFAIL_TESTS =                     \
              bgetNULLAlloc       \
              bgetNULLError       \
              bgetZeroLen         \
              bpoolNULLAlloc      \
              bpoolNULLBuf        \
              bpoolNULLError      \
              bpoolZeroLen        \
              brelNULLAlloc       \
              brelNULLError       \
              brelNULLPtr         \
              CloseNULLAlloc      \
              CloseNULLError      \
              FreeBuffNULLAlloc   \
              FreeBuffNULLArray   \
              FreeBuffNULLError   \
              FreeBuffZeroLen     \
              FreeNULLAlloc       \
              FreeNULLError       \
              FreeNULLPtr         \
              GetBuffNULLAlloc    \
              GetBuffNULLArray    \
              GetBuffNULLError    \
              GetBuffZeroLen      \
              InitNULLAddr        \
              InitNULLAlloc       \
              InitNULLBase        \
              InitNULLError       \
              InitZeroLen         \
              IsBuffNULLAlloc     \
              IsBuffNULLBuf       \
              IsBuffNULLError     \
              MallocNULLAlloc     \
              MallocNULLError     \
              MallocZeroLen       \
              ResetStatsNULLAlloc \
              ResetStatsNULLError \
              SetBaseNULLAlloc    \
              SetBaseNULLBase     \
              SetBaseNULLError    \
              StatsNULLAlloc      \
              StatsNULLCurrent    \
              StatsNULLError      \
              StatsNULLMax        \
              StatsNULLNumFree    \
              StatsNULLNumMalloc  \
              StatsNULLTotal      \
              ValidateNULLAlloc   \
              ValidateNULLError

LDADD = $(top_builddir)/src/Engine/libEngine.la \
        $(top_builddir)/src/Common/libCommon.la

AM_CPPFLAGS = -I$(top_srcdir)/src/Engine \
              -I$(top_srcdir)/src/Common \
              -I$(top_srcdir)/src/include

if COND_USE_ASSERT
   AM_CPPFLAGS += -DUSE_ASSERT
endif
if COND_USE_TRAP_ERRORS
   AM_CPPFLAGS += -DUSE_TRAP_ERRORS
endif

if COND_USE_DBC
   AM_CPPFLAGS += -DUSE_DBC
endif
if COND_USE_EXTREME_DBC
   AM_CPPFLAGS += -DUSE_EXTREME_DBC
endif

distclean-local:
	-rm -rf $(testsubdir)

