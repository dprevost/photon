.TH "psoFastMap.h" 3 "27 Mar 2009" "Version 0.5.0" "Photon Software" \" -*- nroff -*-
.ad l
.nh
.SH NAME
psoFastMap.h \- 
.SH "Detailed Description"
.PP 
This file provides the API needed to access read-only Photon hash maps. 

The features of fast maps are very similar to the features of standard hash maps with one major exception - no locks are required to access the data and special procedures are implemented for the occasional updates:.
.PP
.PD 0
.IP "1." 4
when a map is open in read-only mode (\fBpsoFastMapOpen\fP), the end-of-this-unit-of-work calls (\fBpsoCommit\fP, \fBpsoRollback\fP) will check if a new version of the map exist and if indeed this is the case, the new version will be use instead of the old one. 
.PP

.IP "2." 4
when a map is open for editing (\fBpsoFastMapEdit\fP) a working copy of the map is created in shared memory and the map can be updated (no locks again since only the updater can access the working copy). When the session is committed, the working version becomes the latest version and can be open/accessed by readers. And, of course, the same procedure applies if you have a set of maps that must be changed together.
.PP
If \fBpsoRollback\fP is called, all changes done to the working copy are erased.  
.PP
.PP
Note: the old versions are removed from memory when all readers have updated their versions. Even if a program is only doing read access to shared-memory data, it is important to add \fBpsoCommit\fP once in a while to refresh the 'handles' periodically. 
.PP
Definition in file \fBpsoFastMap.h\fP.
.SH SYNOPSIS
.br
.PP
\fC#include <photon/psoCommon.h>\fP
.br

.SS "Functions"

.in +1c
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapClose\fP (\fBPSO_HANDLE\fP objectHandle)"
.br
.RI "\fIClose a Hash Map. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapDefinition\fP (\fBPSO_HANDLE\fP objectHandle, \fBpsoObjectDefinition\fP *definition, unsigned char *key, \fBpsoUint32\fP keyLength, unsigned char *fields, \fBpsoUint32\fP fieldsLength)"
.br
.RI "\fIRetrieve the data definition of the hash map. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapDefLength\fP (\fBPSO_HANDLE\fP objectHandle, \fBpsoUint32\fP *keyLength, \fBpsoUint32\fP *fieldsLength)"
.br
.RI "\fIRetrieve the lengths of the variable elements of the definition of the hash map. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapDelete\fP (\fBPSO_HANDLE\fP objectHandle, const void *key, \fBpsoUint32\fP keyLength)"
.br
.RI "\fIRemove the data item identified by the given key from the hash map (you must be in edit mode). \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapEdit\fP (\fBPSO_HANDLE\fP sessionHandle, const char *hashMapName, \fBpsoUint32\fP nameLengthInBytes, \fBPSO_HANDLE\fP *objectHandle)"
.br
.RI "\fIOpen a temporary copy of an existing hash map for editing. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapEmpty\fP (\fBPSO_HANDLE\fP objectHandle)"
.br
.RI "\fIRemove all data items from the map (you must be in edit mode). \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapGet\fP (\fBPSO_HANDLE\fP objectHandle, const void *key, \fBpsoUint32\fP keyLength, void *buffer, \fBpsoUint32\fP bufferLength, \fBpsoUint32\fP *returnedLength)"
.br
.RI "\fIRetrieve the data item identified by the given key from the hash map. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapGetFirst\fP (\fBPSO_HANDLE\fP objectHandle, void *key, \fBpsoUint32\fP keyLength, void *buffer, \fBpsoUint32\fP bufferLength, \fBpsoUint32\fP *retKeyLength, \fBpsoUint32\fP *retDataLength)"
.br
.RI "\fIIterate through the hash map. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapGetNext\fP (\fBPSO_HANDLE\fP objectHandle, void *key, \fBpsoUint32\fP keyLength, void *buffer, \fBpsoUint32\fP bufferLength, \fBpsoUint32\fP *retKeyLength, \fBpsoUint32\fP *retDataLength)"
.br
.RI "\fIIterate through the hash map. \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapInsert\fP (\fBPSO_HANDLE\fP objectHandle, const void *key, \fBpsoUint32\fP keyLength, const void *data, \fBpsoUint32\fP dataLength)"
.br
.RI "\fIInsert a data element in the hash map (you must be in edit mode). \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapOpen\fP (\fBPSO_HANDLE\fP sessionHandle, const char *hashMapName, \fBpsoUint32\fP nameLengthInBytes, \fBPSO_HANDLE\fP *objectHandle)"
.br
.RI "\fIOpen an existing hash map read only (see \fBpsoCreateObject\fP to create a new object). \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapReplace\fP (\fBPSO_HANDLE\fP objectHandle, const void *key, \fBpsoUint32\fP keyLength, const void *data, \fBpsoUint32\fP dataLength)"
.br
.RI "\fIReplace a data element in the hash map (you must be in edit mode). \fP"
.ti -1c
.RI "PHOTON_EXPORT int \fBpsoFastMapStatus\fP (\fBPSO_HANDLE\fP objectHandle, \fBpsoObjStatus\fP *pStatus)"
.br
.RI "\fIReturn the status of the hash map. \fP"
.in -1c
.SH "Author"
.PP 
Generated automatically by Doxygen for Photon Software from the source code.
